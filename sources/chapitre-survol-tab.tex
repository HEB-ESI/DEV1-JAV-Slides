% === Cours de Java

\subsection{Les tableaux (survol)}

\begin{frame}{Avertissement}
	\begin{center}
		Nous présentons ici une vue \emph{simplifiée} 
		\\des tableaux en Java afin de \emph{coller} 
		\\à votre cours d'\emph{algorithmique}.
		\bigskip
		\\Nous aurons l'occasion d'être plus précis 
		\\lors d'une prochaine leçon.
\end{center}
\end{frame}

\imgfullh{../img/color-bucket-12641657814_c8de7afa1e_k.jpg}{
	\begin{center}
		\bf\LARGE\color{azuremist}
		tableau\\
		\medskip
		\Large
		plusieurs variables de même type
	\end{center}
}{https://www.flickr.com/photos/michel_poitrenaud/12641657814}

\begin{frame}[fragile]{Présentation}
	\par Nécessité de manipuler \emph{plusieurs variables similaires} auxquelles 
	on accède par un \emph{indice}
  	\begin{center}
		\includegraphics[scale=.35]{../img/tab-pres}
	\end{center}
	\bigskip
	Pourquoi pas plusieurs variables ?
\end{frame}

\note{
	\begin{itemize}
		\item \emph{Ex}: plusieurs cotes, plusieurs températures
		\item Accès à un des éléments via un \emph{indice} (\textit{position})
	\end{itemize}
}

\begin{frame}[fragile]{Présentation}
	\par Écriture \emph{compacte} et qui s'\emph{adapte} à la taille
	\bigskip
	\par \emph{Exemple} 
	\par En algorithmique, si "tableau" est un tableau de $N$ entiers
     \begin{Java}
  pour i de 0 à N-1 faire
     afficher tableau[i]
  fin pour
     \end{Java}
\end{frame}


%%%
%\subsubsection{Déclaration / Création}

\full[bluepigment]{
	\Huge\tt\bf\color{brickred}
	[]
	\par\vspace{2cm}
	\LARGE\bf\color{azuremist}
	Déclaration
	\bigskip
	\Large\tt
	\par Type[] identifier
}

\begin{frame}[fragile]{Déclaration}
	\emph{Exemples}
    \begin{itemize}
    	\item \java{int[]} est le type \textit{tableau d'entiers}
	    \item \java{String[]} est le type \textit{tableau de chaines de caractères}
    \end{itemize}
	\bigskip
	\bigskip
    \begin{Java}
    int[] cotes;
    String[] noms;
    \end{Java}
\end{frame}

\note{
	En \sigle{Java} : uniquement des tableaux \emph{dynamiques}
    \begin{itemize}
    	\item La taille ne fait pas partie du type
	    \item Déclaration et création sont séparées
    \end{itemize}
	La déclaration suit la syntaxe habituelle
}

\full[bluepigment]{
	\Huge\tt\bf\color{brickred}
	new
	\par\vspace{2cm}
	\LARGE\bf\color{azuremist}
	Création
	\bigskip
	\Large\tt
	\par identifier = new Type[taille]	
}


\begin{frame}[fragile]{Création}
	\emph{Exemple}
	\begin{itemize}
		\item \java{new int[3]}
		\item \java{new String[taille]} où taille est défini
	\end{itemize}
	\bigskip
    \begin{Java}
    int[] entiers;
    entiers = new int[3];
    \end{Java}
    \bigskip
	\emph{Remarque}
	\\La déclaration et la création peuvent être combinées
    \\\java{int[] entiers = new int[3];}
\end{frame}

\full[bluepigment]{
	\Huge\tt\bf\color{brickred}
	\{\}
	\par\vspace{2cm}
	\LARGE\bf\color{azuremist}
	Initialisation
	\bigskip
	\Large\tt
	\par identifier = new Type[] \{x, x\}	
}

\begin{frame}[fragile]{Initialisation}
	\emph{Exemple}
	\begin{itemize}
		\item \java{new int[] \{42, 17, -5\}}
		\item \java{new String[] \{"foo", "bar"\}}
	\end{itemize}
	\bigskip
	\begin{Java}
int[] entiers = new int[] {0x2A, 021, -5};
String[] noms = new String[] 
    {"Victoria", "Melanie", "Melanie",  "Emma", "Geri"};

double[] réels;
réels = new double[] {4.2, -1};
	\end{Java}
	\bigskip
	\small{
	\emph{Remarque}
	\\Par défaut, les éléments sont initialisés à \java{0} (numériques) 
	ou \java{false} (booléens)
}
\end{frame}

\begin{frame}[fragile]{Création et initialisation}
	\emph{Cas particulier}
	\par
	Création du tableau et initialisation en une seule étape, 
	\\en \emph{donnant ses valeurs}
	\vspace{1cm}
    \begin{Java}
int[] entiers = {0x2A, 021, -5};
double[] pseudoRéels = {4.5, 1E-4, -4.12, Math.PI};

double[] réels;
réels = {4.2, -1}; // FAUX
    \end{Java}
\end{frame}


%\subsubsection{Accès}

\imgfullh{../img/a_bath_in_a_bucket.jpg}{
	\Large\bf\color{snow}
	\vspace{2.5cm}
	Accès aux éléments
	\par\vspace{5mm}\color{brickred}\texttt{\Huge\bf[i]}
}{http://n-scapephotography.deviantart.com/art/A-bath-in-a-bucket-286676419}

\begin{frame}[fragile]{Accès aux éléments}
	\emph{\huge\bf [i]}
	\begin{itemize}
  		\item 0 est l'indice de départ
		\item indices de \emph{0} à \emph{taille du tableau - 1}
		\item la taille du tableau est son nombre d'éléments
  	\end{itemize}
  	\bigskip
    \begin{Java}
int[] entiers = {3, 14, 15};
int entier = entiers[2]; // entier vaut 15
entiers[1] = 85;
entier = 0;
entier = entiers[entier+1]; //entier vaut 85
    \end{Java}
\end{frame}

\begin{frame}[fragile]{Accès aux éléments}
  \emph{Exemple}
  \medskip
  \begin{Java}
  package be.he2b.esi.lg1.tutorials.tableaux;

  public class InitialisationTableau {
     public static void main(String[] args) {
        int[] entiers = new int[10];
        for(int i = 0; i < 10; i++) {
           entiers[i] = i;
        }
     }
  }
  \end{Java}
\end{frame}

%%%
%\subsubsection{Taille}

\imgfullh{../img/plantationmai-2013-bw.jpg}{
	\begin{flushright}
		\begin{minipage}[l]{.4\linewidth}
			\color{brickred}
			Un tableau connait 
			\\\textbf{\Large sa taille}
			\bigskip
			\\\color{black}\texttt{identifier.length}
		\end{minipage}
	\end{flushright}
}{home made à la plantation du mai 2013}

\begin{frame}[fragile]{Taille}
  \emph{Exemple}
  \bigskip
  \begin{Java}
  int[] entiers = {4, 5, 6};
  int taille = entiers.length;
  System.out.println(taille); // écrit 3
  \end{Java}
\end{frame}

\begin{frame}[fragile]{Taille}
  	\emph{Exemple}
  	\bigskip
  	\begin{Java}
  package be.he2b.esi.lg1.tutorials.tableaux;

  public class SimpleParcoursAscendant {
     public static void main(String[] args){
        int[] entiers = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        for(int i = 0; i < entiers.length; i = i + 1) {
           System.out.println(entiers[i]);
        }
     }
  }
  \end{Java}
\end{frame}

\begin{frame}[fragile]{Taille}
  	\emph{Exemple}
  	\bigskip
  	\begin{Java}
  package be.he2b.esi.lg1.tutorials.tableaux;

  public class SimpleParcoursDescendant {
     public static void main(String[] args){
        int[] entiers = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        for(int i = entiers.length - 1; i >= 0; i = i-1) {
           System.out.println(entiers[i]);
        }
     }
  }
  \end{Java}
\end{frame}


%%%
%\subsubsection{Tableau et méthode}

\begin{frame}[fragile]{Tableau et méthode}
Un tableau peut être un paramètre d'une méthode.
\\\emph{Exemple} : Afficher un tableau 
\begin{Java}
   public static void afficher( int[] entiers ) {
      for(int i = 0; i<entiers.length; i++) {
         System.out.println(entiers[i]);
      }
   }
\end{Java}
\begin{itemize}
  \item L'appel pourrait être
  \begin{Java}
  int[] cotes = {12, 8, 10, 14, 9};
  afficher( cotes );
  \end{Java}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Tableau et méthode}
	\begin{center}
		En \sigle{Java}, \textbf{passage de paramètre par valeur}. 
		\par\bigskip
		Pour un tableau, cela signifie que l'on ne peut pas \\
		modifier le tableau dans son ensemble mais que \\
		l'on pourra modifier ses éléments.
 	\end{center}
\end{frame}

\begin{frame}[fragile]{Tableau et méthode}
  \emph{Exemple}
  \begin{Java}
   public static void remplir( int[] entiers, int val ) {
      for(int i = 0; i<entiers.length; i++) {
         entiers[i] = val;
      }
   }
  \end{Java}
  \begin{itemize}
  	\item L'appel pourrait être
  \begin{Java}
  int[] cotes = new int[16]; // Ne pas oublier de le créer
  remplir( cotes, 20 );
  \end{Java}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Tableau et méthode}
 	\emph{Exemple}
 	\begin{Java}
    public static void méthodeFausse( double[] réels) {
        double[] réelsDePassage = {4.2, -7, Math.PI};
        réels = réelsDePassage; // INUTILE
   }
 	\end{Java}
 	\bigskip
 	Quel que soit l'appel, le tableau que l'on passe en paramètre ne sera pas
 	modifié
\end{frame}
\note{
	\par Différencier passage de paramètre par valeur et en entrée-sortie. 
	Comparer la situation en algorithmique et en java
}

\begin{frame}[fragile]{Tableau et méthode}
  Un tableau peut être une valeur de retour
  \\\emph{Exemple} : Créer un tableau avec valeur
  \begin{Java}
   public static int[] créer( int taille, int val ) {
      int[] entiers = new int[taille];
      for(int i = 0; i<taille; i++) {
         entiers[i] = val;
      }
      return entiers;
   }
  \end{Java}
  \begin{itemize}
  \item L'appel pourrait être
  \begin{Java}
  int[] cotes = créer(16, 20);
  \end{Java}
  \end{itemize}
\end{frame}

\subsection{Erreurs fréquentes}

\begin{frame}[fragile]{Erreurs fréquentes}
	\textbf{Exceptions}
	\begin{itemize}
		\item \java{NullPointerException} : si vous essayez d'accéder à un élément d'un tableau qui n'a pas été créé
		\\(le tableau vaut \java{null} dans ce cas)
		\item \java{ArrayIndexOutOfBoundsException} : si vous donnez un indice qui n'existe pas (ex: \java{tab[10]} quand il n'y a que 10 éléments dans le tableau)
	\end{itemize}
\end{frame}

\subsection{Paramètres du main}

\begin{frame}[fragile]{Paramètres du main}
	Vous pouvez maintenant mieux comprendre
	\begin{Java}[emph={args},emphstyle={\color{burntorange}\bfseries}]
public static void main(String[] args) {
	\end{Java}
	\begin{itemize}
		\item La méthode principale reçoit un tableau de chaines
	\end{itemize}
	\bigskip
	\emph{D'où vient} ce tableau ?
	\begin{itemize}
		\item Il est composé de valeurs données lors du lancement
		\item \emph{Ex:} \texttt{java MonProgramme par0 par1}
		\begin{itemize}
		\item Lance la méthode principale de la classe \texttt{MonProgramme}
		\item Cette méthode reçoit un tableau de taille 2
		\item Contenant les valeurs \texttt{par0} et \texttt{par1}
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}[fragile]{Paramètres du main}
	\emph{Exemple}
	\begin{Java}
public class Reverse {
	public static void main(String[] args) {
		for(int i=args.length-1; i>=0; i--) {
			System.out.print(agrs[i]);
		}
		System.out.println();
	}
}
	\end{Java}
	Que va donner ?
	\begin{itemize}
		\item \texttt{java Reverse le début de la fin}
		\item \texttt{java Reverse \"le début\" de \"la fin\"}
	\end{itemize}
\end{frame}
